<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Zika Virus Epidemic 2015-2016</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Bootstrap core CSS -->
    <!-- <link href="../../dist/css/bootstrap.min.css" rel="stylesheet"> -->

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!-- <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet"> -->

    <!-- Custom styles for this template -->
    <link href="starter-template.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <!-- <script src="../../assets/js/ie-emulation-modes-warning.js"></script> -->

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="d3.slider.css" />
    <style>
        body {
            background-color: white;
        }
        
        svg {
            border: 2px solid white;
            background-color: whitesmoke;
        }
        
        .selected {
            fill: white;
        }
        
        .boundary {
            fill: lightgrey;
            stroke: black;
            stroke-width: 2px;
            opacity: 0.4;
        }
        
        .hidden {
            display: none;
        }
        
        div.tooltip {
            color: #222;
            background: #fff;
            border-radius: 3px;
            box-shadow: 0px 0px 2px 0px #a6a6a6;
            padding: .2em;
            text-shadow: #f5f5f5 0 1px 0;
            opacity: 0.9;
            position: absolute;
        }
        
        .site {
            stroke-width: 2px;
            stroke: white;
            fill: red;
            opacity: 0.5;
            border: 2px solid white;
        }
        
        .legend {
            stroke-width: 0.5px;
            stroke: black;
            fill: None;
        }
        
        #slider3 {
            margin: 20px 0 10px 20px;
            width: 900px;
            fill: red;
            background: beige;
            margin-left: auto;
            margin-right: auto;
            display: block;
        }
        
        #SVGmain {
            margin-left: auto;
            margin-right: auto;
            display: block;
        }
        
        .d3-slider-axis-bottom {
            fill: black;
            background: :white;
        }

    </style>
</head>

<body>

    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
                <a class="navbar-brand" href="#">Zika Virus Epidemic</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="#about">Background</a></li>
                    <li><a href="#geo">Geographic</a></li>
                    <li><a href="#time">Temporal</a></li>
                    <li><a href="#demographic">Demographic</a></li>
                    <li><a href="#data">About the data</a></li>
                    <li><a href="#contribute">Contribute</a></li>
                    <li><a href="#other">Other</a></li>
                </ul>
            </div>
            <!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container">

        <div class="starter-template">
            <h1>Visualizing 2015-2016 Zika Epidemic </h1>
            <p class="lead">Making sense of the trend.</p>
        </div>

    </div>

    <!-- /.container -->

    <section class="primary" id="about">
        <div class="container">

            <div class="starter-template">
                <h2 "text-align:center;">Background</h2>
            </div>
            <p>An outbreak of the Zika virus, an infection transmitted mostly by the Aedes species mosquito (Ae. aegypti and Ae. albopictus), has been sweeping across the Americas and the Pacific since mid-2015. Although first isolated in 1947 in Uganda, a lack of previous research has challenged the scientific community to quickly understand its devastating effects as the epidemic continues to spread. The virus is typically transmitted from infected pregnant mother to the fetus, and can cause severe birth defect and neurological damage in the newborn. In February, WHO declared the outbreak a "Public Health Emergency of International Concern". </p>

        </div>

    </section>

    <section class="primary" id="geo">
        <div class="container" id="geo">
            <div class="starter-template">
                <h2 "text-align:center;">Geographic Information</h2>
            </div>
            <p> Which countries have the most confirmed cases? How is the spread evolving over time?</p>


        </div>

        <div class="container">
        </div>
        <div class="container">
            <p> The visualization below allows you to see the spread and in time to see the progressing and impact in each region of the world relative to each other. The data are aggregated at the province/state level. The size of the bubble reflects number of cumulative confirmed cases in the region.</p>
            <p style="font-size:110%">Usage:</p>
            <ul>
            <li>Use the slider bar at the top of the map to move to different points in time.</li>
            <li>Zoom in on any part of the map by double clikcing or using mouse wheel/touchpad.</li>
            <li>Drag the map to move to different locations after zooming </li>
            </ul>
        </div>
        <div id="slider3"></div>
        <div id="map"></div>

        <script src="http://d3js.org/d3.v3.min.js"></script>
        <script src="http://d3js.org/topojson.v1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.3/moment.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
        <script src="https://d3js.org/d3-color.v1.min.js"></script>
        <script src="d3.slider.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>
        <script>
            var width = 962,
                rotated = 90,
                height = 1000;

            //countries which have states, needed to toggle visibility
            //for USA/ etc. either show countries or states, not both
            var usa, canada;
            var states; //track states
            //track where mouse was clicked
            var initX;
            //track scale only rotate when s === 1
            var s = 1;
            var mouseClicked = false;
            var xAxisScale = d3.scale.linear()
                .domain([0, width])
                .range([0, width]);

            var yAxisScale = d3.scale.linear()
                .domain([0, height])
                .range([height, 0]);

            // initial position of projection
            var projection = d3.geo.mercator()
                .center([0, -25])
                .scale(500)
                .translate([300, height / 1.5])
                .rotate([rotated, 0, 0]);

            var zoom = d3.behavior.zoom()
                .scaleExtent([1, 10])
                .x(xAxisScale)
                .y(xAxisScale)
                .scale(0.8)
                .on("zoom", zoomed);

            function zoomed() {
                var t = d3.event.translate;
                s = d3.event.scale;
                var h = 0;

                //                t[0] = Math.min(
                //                    (width / height) * (s - 1),
                //                    Math.max(width * (1 - s), t[0])
                //                );
                //
                //                t[1] = Math.min(
                //                    h * (s - 1) + h * s,
                //                    Math.max(height * (1 - s) - h * s, t[1])
                //                );

                zoom.translate(t);
                //                if (s === 1 && mouseClicked) {
                //                    rotateMap(d3.mouse(this)[0])
                //                    return;
                //                }

                g.attr("transform", "translate(" + t + ")scale(" + s + ")");

                svg.selectAll("path")
                    .attr("d", path.projection(projection));

                //adjust the stroke width based on zoom level
                d3.selectAll(".boundary")
                    .style("stroke-width", 1 / s);

                //toggle state/USA visability
                //                if (s >= 0) {
                //                    states.classed('hidden', false);
                //                    usa.classed('hidden', false);
                //                    canada.classed('hidden', true);
                //                } else {
                //                    states.classed('hidden', false);
                //                    usa.classed('hidden', false);
                //                    canada.classed('hidden', false);
                //                };
                var circles = d3.select("svg").selectAll("circle");
                circles
                    .attr("cx", function(d, i) {
                        return projection([xAxisScale(d.cx), yAxisScale(d.cy)])[0]
                    })
                    .attr("cy", function(d, i) {
                        return projection([xAxisScale(d.cx), yAxisScale(d.cy)])[1]
                    })
                    //                    .attr("d", path.projection(projection))
                    //                    .attr("transform", "translate(" + t + ")scale(" + s + ")")
                    .attr("transform", "translate(" + t + ")");


                var legends = d3.selectAll(".legend").selectAll("circle");
                legends
                    .attr('transform', 'scale(' + s + ')')
                    .attr("cx", function(d, i) {
                        console.log("legend X coordianate " + d.cx);
                        return xAxisScale(d.cx);
                    })
                    .attr("cy", function(d, i) {
                        return yAxisScale(d.cy);
                    });



                //                .transition()
                //                .duration(750)
                //                .attr("transform", function(d) {
                //                    var t = d3.transform(d3.select(this).attr("transform")).translate; //maintain aold marker translate
                //                    return "translate(" + t[0] + "," + t[1] + ")scale(" + 1 / scale + ")"; //inverse the scale of parent
                //                });
                //            var bounds = path.bounds(d),
                //                dx = bounds[1][0] - bounds[0][0],
                //                dy = bounds[1][1] - bounds[0][1],
                //                x = (bounds[0][0] + bounds[1][0]) / 2,
                //                y = (bounds[0][1] + bounds[1][1]) / 2,
                //                scale = .9 / Math.max(dx / width, dy / height),
                //                translate = [width / 2 - scale * x, height / 2 - scale * y];

                //            g.selectAll(".site")
                // 
                //                .attr("transform", function(d) {
                //                    var t = d3.transform(d3.select(this).attr("transform")).translate; //maintain aold marker translate
                //                    return "translate(" + t[0] + "," + t[1] + ")scale(" + 1   + ")"; //inverse the scale of parent
                //                });
            }
            var svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height)
                .attr("id", "SVGmain")
                //track where user clicked down
                //                                .on("mousedown", function() {
                //                                    d3.event.preventDefault();
                //                                    //only if scale === 1
                //                                    if (s !== 1) return;
                //                                    initX = d3.mouse(this)[0];
                //                                    mouseClicked = true;
                //                                })
                //                                .on("mouseup", function() {
                //                                    if (s !== 1) return;
                //                                    rotated = rotated + ((d3.mouse(this)[0] - initX) * 360 / (s * width));
                //                                    mouseClicked = false;
                //                                })
                .call(zoom.on("zoom", zoomed));
            //                .attr("transform", "translate(1,1)scale(1,1)");


            function rotateMap(endX) {
                projection.rotate([rotated + (endX - initX) * 360 / (s * width), 0, 0])
                g.selectAll('path') // re-project path data
                    .attr('d', path);
            }
            //for tooltip
            var offsetL = document.getElementById('map').offsetLeft + 10;
            var offsetT = document.getElementById('map').offsetTop + 10;

            var path = d3.geo.path()
                .projection(projection);

            var tooltip = d3.select("#map")
                .append("div")
                .attr("class", "tooltip hidden");


            //need this for correct panning
            var g = svg.append("g");
            var zikadata = []
            //det json data and draw it
            d3.json("combined2.json", function(error, world) {
                if (error) return console.error(error);

                //countries
                g.append("g")
                    .attr("class", "boundary")
                    .selectAll("boundary")
                    .data(topojson.feature(world, world.objects.countries).features)
                    .enter().append("path")
                    .attr("name", function(d) {
                        return d.properties.name;
                    })
                    .attr("id", function(d) {
                        return d.id;
                    })
                    //                .on('click', selected)
                    .on("mousemove", showTooltip)
                    .on("mouseout", function(d, i) {
                        tooltip.classed("hidden", true);
                    })
                    .attr("d", path);

                usa = d3.select('#USA');
                canada = d3.select('#CAN');

                //states
                g.append("g")
                    .attr("class", "boundary state")
                    .selectAll("boundary")
                    .data(topojson.feature(world, world.objects.states).features)
                    .enter().append("path")
                    .attr("name", function(d) {
                        return d.properties.name;
                    })
                    .attr("id", function(d) {
                        return d.id;
                    })
                    .on('click', selected)
                    .on("mousemove", showTooltip)
                    .on("mouseout", function(d, i) {
                        tooltip.classed("hidden", true);
                    })
                    .attr("d", path);

                states = d3.selectAll('.state');

                //attach initial data

                d3.csv("Zika_incidence.csv", function(error, data) {
                        g.selectAll(".site")
                            .data(data).enter()
                            .append("circle")
                            .attr("cx", function(d) {
                                return projection([d.lon, d.lat])[0];
                            })
                            .attr("cy", function(d) {
                                return projection([d.lon, d.lat])[1];
                            })
                            .style("fill", "red")
                            .attr("r", 20);

                    })
                    .get(function(err, rows) {
                        if (err) return console.error(err);
                        window.site_data = rows;
                    });
            }); //end of topojson loading

            //attach initial data
            var sizeScale = d3.scale.linear().domain([1, 80000]).range([3, 30]);
            var colorScale = d3.scale.linear().domain([1, 300]).range([255, 0]);
            var provincelist = [];
            d3.csv("Initial_province_coordinates.csv", function(error, data) {
                data.forEach(function(d) {
                    provincelist.push({
                        province: d.Province
                    })
                });
                g.selectAll(".site")
                    .data(data).enter()
                    .append("circle")
                    .attr("id", function(d) {
                        return d.Province
                    })
                    .attr("cx", function(d) {
                        return projection([+d.lon, +d.lat])[0];
                    })
                    .attr("cy", function(d) {
                        return projection([+d.lon, +d.lat])[1];
                    })
                    .attr("r", 0)
                    .style("fill", "red")

            });

            // function for behavior of showing land tooltip
            function showTooltip(d) {
                label = d.properties.name;
                var mouse = d3.mouse(svg.node())
                    .map(function(d) {
                        return parseInt(d);
                    });
                tooltip.classed("hidden", false)
                    .attr("style", "left:" + (mouse[0] + offsetL) + "px;top:" + (mouse[1] + offsetT) + "px")
                    .html(label);
            }

            // function for behavior of showing circle tooltip

            var circletag = d3.select('.site')
                .append('div')
                .attr('class', 'hidden tag');

            function showCircleTag(d) {
                label = d.cases;
                var mouse2 = d3.mouse(svg.node())
                    .map(function(d) {
                        return parseInt(d);
                    });
                circletag.classed("hidden", false)
                    .attr("style", "left:" + (mouse2[0] + offsetL) + "px;top:" + (mouse2[1] + offsetT) + "px")
                    .html(label + " cases");
            }


            //function for behavior of selected states
            function selected() {
                d3.select('.selected').classed('selected', false);
                d3.select(this).classed('selected', true);
            }


            //display function
            var displaySites = function(data) {
                var currentprovinces = provincelist.slice()
                for (i = 1; i < data.length; i++) {
                    d = [data[i]]
                    var provinceID = "#" + data[i].Province;
                    if (data[i].cases > 0) {
                        currentprovinces.splice(currentprovinces.indexOf(data[i].Province), 1);
                    };

                    g.select(provinceID)
                        .data(d, function(d) {
                            return d;
                        })
                        .transition()
                        .duration(100)
                        .attr("class", "site")
                        .attr("r", function(d) {
                            if (d.cases >= 1) {
                                return sizeScale(d.cases);
                            }
                        })


                };

                currentprovinces.forEach(function(d) {
                    idremove = "#" + d.province;
                    g.select(idremove)
                        .transition()
                        .duration(100)
                        .attr("class", "site")
                        .attr("r", 0)
                });
            };


            //        g.selectAll(".site")
            //            .on("mousemove", showCircleTag)
            //            .on("mouseout", function(d, i) {
            //                circletag.classed("hidden", true);
            //            })
            // circle size legend
            var legendX = width * 0.90;
            var legendY = height * 0.2;
            var legendNumber = [5000, 50000, 100000, 200000]
            var legend = svg.append("g")

            legend.selectAll(".legend")
                .data(legendNumber)
                .enter()
                .append("circle")
                .attr("class", "legend")
                .attr("r", function(d) {
                    return sizeScale(d)
                })
                .attr("cx", legendX)
                .attr('cy', function(d) {
                    return legendY - sizeScale(d)
                })
            legend.selectAll(".legendText")
                .data(legendNumber)
                .enter()
                .append("text")
                .attr("x", legendX - 10)
                .attr('y', function(d) {
                    return legendY - sizeScale(d) * 2 - 5
                })
                .attr("dy", "0.4em")
                .text(function(d) {
                    return numeral(d).format("0,0");
                })
                .attr("font-size", "10px");


            // construct slider
            var minDateUnix = moment('2015-12-05', "YYYY MM DD").unix();
            var maxDateUnix = moment('2016-07-02', "YYYY MM DD").unix();
            var secondsInDay = 60 * 60 * 24;
            var parseDate = d3.time.format('%Y-%m-%d').parse;
            var timeFormat = d3.time.format('%Y-%m-%d');
            var minDate = timeFormat.parse('2015-11-01');
            var maxDate = timeFormat.parse('2016-07-02');
            var sliderscale = d3.time.scale().domain([minDate, maxDate]).ticks(d3.time.month, 7)
            var tickDates = [parseDate("2016-01-01"), parseDate("2016-02-01"), parseDate("2016-03-01"), parseDate("2016-04-01"), parseDate("2016-05-01"), parseDate("2016-06-01"), parseDate("2016-07-01")]
            var tickDates = ["2016-01-01", "2016-02-01", "2016-03-01", "2016-04-01", "2016-05-01", "2016-06-01", "2016-07-01"]
            var axis_values = [];
            for (var i = 0; i != 100; ++i) axis_values.push(i);

            d3.select('#slider3').call(
                d3.slider()
                .axis(true)
                .scale(d3.time.scale().domain([minDate, maxDate]))
                //            .snap(true)
                .axis(d3.svg.axis().ticks(10))
                .on("slide", function(evt, value) {
                    var filterByTime = _(site_data)
                        .filter(function(site) {
                            //var date = moment(site.report_date, "YYYY-MM-DD").unix()
                            var date = new Date(site.report_date)
                            return date < value;
                        })

                    var groupByLocation = d3.nest()
                        .key(function(d) {
                            return d.Province;
                        })
                        .sortKeys(d3.ascending)
                        .rollup(function(d) {
                            return {
                                value: d3.sum(d, function(g) {
                                    return +g.value;
                                }),
                                lon: d[0].lon,
                                lat: d[0].lat
                            }
                        })
                        .entries(filterByTime)
                        .map(function(d) {
                            return {
                                cases: d.values.value,
                                lon: d.values.lon,
                                lat: d.values.lat,
                                Province: d.key
                            }
                        });
                    displaySites(groupByLocation);
                })
            );

        </script>
    </section>

    <section class="primary" id="time">
        <div class="starter-template" id="time">
            <div class="page-header">
                <h2>Temporal</h2>
            </div class="container">
            <p> How does the cases compare to each other?</p>
            <div class='tableauPlaceholder' id='viz1492851132584' style='position: relative'><noscript><a href='#'><img alt='Confirmed Zika Cases Per Country ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Zi&#47;ZikaVirusEpidemic&#47;ConfirmedZikaCasesPerCountry&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='site_root' value='' /><param name='name' value='ZikaVirusEpidemic&#47;ConfirmedZikaCasesPerCountry' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Zi&#47;ZikaVirusEpidemic&#47;ConfirmedZikaCasesPerCountry&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /></object></div>
            <script type='text/javascript'>
                var divElement = document.getElementById('viz1492851132584');
                var vizElement = divElement.getElementsByTagName('object')[0];
                vizElement.style.width = '100%';
                vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                vizElement.parentNode.insertBefore(scriptElement, vizElement);

            </script>
            <div class='tableauPlaceholder' id='viz1492851409782' style='position: relative'><noscript><a href='#'><img alt='Small Multiples ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Zi&#47;ZikaVirusEpidemic&#47;SmallMultiples&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='site_root' value='' /><param name='name' value='ZikaVirusEpidemic&#47;SmallMultiples' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Zi&#47;ZikaVirusEpidemic&#47;SmallMultiples&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /></object></div>
            <script type='text/javascript'>
                var divElement = document.getElementById('viz1492851409782');
                var vizElement = divElement.getElementsByTagName('object')[0];
                vizElement.style.width = '100%';
                vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                vizElement.parentNode.insertBefore(scriptElement, vizElement);

            </script>
        </div>
    </section>

    <section id="demographic">
        <div class="starter-template">
            <div class="page-header">
                <h2>Demographic</h2>
            </div>
            <p> What can we learn about impact of ebola on age or gender?</p>
            <div class='tableauPlaceholder' id='viz1492851660354' style='position: relative'><noscript><a href='#'><img alt='Age Distribution Dashboard ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Zi&#47;ZikaVirusEpidemic&#47;AgeDistributionDashboard&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='site_root' value='' /><param name='name' value='ZikaVirusEpidemic&#47;AgeDistributionDashboard' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Zi&#47;ZikaVirusEpidemic&#47;AgeDistributionDashboard&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /></object></div>
            <script type='text/javascript'>
                var divElement = document.getElementById('viz1492851660354');
                var vizElement = divElement.getElementsByTagName('object')[0];
                vizElement.style.width = '1004px';
                vizElement.style.height = '869px';
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                vizElement.parentNode.insertBefore(scriptElement, vizElement);

            </script>
            <div class='tableauPlaceholder' id='viz1492851707387' style='position: relative'><noscript><a href='#'><img alt='Gender ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Zi&#47;ZikaVirusEpidemic&#47;Gender&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz' style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='site_root' value='' /><param name='name' value='ZikaVirusEpidemic&#47;Gender' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Zi&#47;ZikaVirusEpidemic&#47;Gender&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /></object></div>
            <script type='text/javascript'>
                var divElement = document.getElementById('viz1492851707387');
                var vizElement = divElement.getElementsByTagName('object')[0];
                vizElement.style.width = '100%';
                vizElement.style.height = (divElement.offsetWidth * 0.75) + 'px';
                var scriptElement = document.createElement('script');
                scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
                vizElement.parentNode.insertBefore(scriptElement, vizElement);

            </script>
        </div>
    </section>

    <section id="data">
        <div class="starter-template">
            <div class="page-header">
                <h2>About the Data</h2>
            </div>
            <p>The dataset from CDC is publicly available data related to the ongoing Zika epidemic. It was provided as a resource to the scientific community engaged in the public health response. However, some data provided here is not official and should be considered provisional and non-exhaustive. Before using any of insights or data below, it is advisable to review the original reports and sources, which are provided whenever possible along with further information on CDC Zika epidemic GitHub.</p>

            <p>The dataset used from CDC Zika github repo includes the following fields:</p>
            <p> report_date - The report date is the date that the report was published. The date should be specified in standard ISO format (YYYY-MM-DD).</p>
            <p> location - A location is specified for each observation following the specific names specified in the country place name database. This may be any place with a 'location_type' as listed below, e.g. city, state, country, etc. It should be specified at up to three hierarchical levels in the following format: [country]-[state/province]-[county/municipality/city], always beginning with the country name. If the data is for a particular city, e.g. Salvador, it should be specified: Brazil-Bahia-Salvador.</p>
            <p> location_type - A location code is included indicating: city, district, municipality, county, state, province, or country. If there is need for an additional 'location_type', open an Issue to create a new 'location_type'.</p>
            <p> report_date - The report date is the date that the report was published. The date should be specified in standard ISO format (YYYY-MM-DD).</p>
            <p> data_field - The data field is a short description of what data is represented in the row and is related to a specific definition defined by the report from which it comes.</p>
            <p> data_field_code - This code is defined in the country data guide. It includes a two letter country code (ISO-3166 alpha-2, list), followed by a 4-digit number corresponding to a specific report type and data type.</p>
            <p> time_period - Optional. If the data pertains to a specific period of time, for example an epidemiological week, that number should be indicated here and the type of time period in the 'time_period_type', otherwise it should be NA.</p>
            <p> time_period_type - Required only if 'time_period' is specified. Types will also be specified in the country data guide. Otherwise should be NA.</p>
            <p> value - The observation indicated for the specific 'report_date', 'location', 'data_field' and when appropriate, 'time_period'.</p>
            <p> unit - The unit of measurement for the 'data_field'. This should conform to the 'data_field' unit options as described in the country-specific data guide.</p>
        </div>
    </section>

    <section id="contribute">
        <div class="starter-template">
            <div class="page-header">
                <h2>Contribute</h2>
            </div>
            <p> 3 ways to contribute:</p>
            <p><a href="https://github.com/cdcepi/zika/blob/master/how_to_contribute.md">   1. Add to the CDC Zika repo</a> </p>
            <p><a href="https://www.kaggle.com/cdc/zika-virus-epidemic">   2. Participate in the Kaggle analysis of CDC Zika data</a> </p>
            <p><a href="mailto:siddharth.singhal@berkeley.edu">   3.  This visualization</a> - share your opinions and thoughts</p>
        </div>
    </section>

    <section id="other">
        <div class="container">
            <div class="page-header">
                <h2>Other Data sources</h2>
            </div>
            <h3><a id="user-content-official---international" class="anchor" href="#official---international" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Official - International</h3>
            <p><a href="http://www.cdc.gov/zika/geo/active-countries.html">Centers for Disease Control and Prevention</a> - list of countries with active local transmission</p>
            <p><a href="http://www.paho.org/hq/index.php?option=com_content&amp;view=article&amp;id=11585&amp;Itemid=41688&amp;lang=en">Pan American Health Organization</a> - situation reports</p>
            <p><a href="http://ais.paho.org/phip/viz/ed_zika_epicurve.asp">Pan American Health Organization</a> - epidemic curves dataset</p>
            <p><a href="http://www.who.int/csr/don/archive/disease/zika-virus-infection/en/">World Health Organization</a> - situation reports</p>
            <p><a href="http://ecdc.europa.eu/en/healthtopics/zika_virus_infection/zika-outbreak/Pages/zika-outbreak.aspx">European Centre for Disease Prevention and Control</a> - situation reports</p>
            <p><a href="https://knoema.com/atlas/topics/Zika/datasets">Datasets</a> - other datasets</p>
            <h3><a id="user-content-official---country" class="anchor" href="#official---country" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Official - Country</h3>
            <p><a href="http://www.cdc.gov/zika/geo/united-states.html">Centers for Disease Control and Prevention</a> - United States data</p>
            <p><a href="http://www.nhs.uk/Conditions/zika-virus/Pages/Introduction.aspx">NHS</a> Official United Kingdom </p>
            <p><a href="http://www.webmd.com/a-to-z-guides/zika-virus-symptoms-prevention">WebMD</a> Symptoms and prevention</p>
            <h3><a id="user-content-genetic--genomic" class="anchor" href="#genetic--genomic" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Genetic / Genomic</h3>
            <p><a href="http://www.ncbi.nlm.nih.gov/nuccore/?term=zika">National Center for Biotechnology Information - GenBank</a> - sequence data</p>
            <p><a href="http://www.viprbrc.org/brc/home.spg?decorator=flavi_zika">Virus Pathogen Resource</a> - sequence data</p>
            <p><a href="https://dholk.primate.wisc.edu/announcements/dho/public/Zika/public/ZIKV-001-public/thread.view?rowId=116">University of Wisconsin-Madison</a> - sequence and alignment data</p>
            <p><a href="http://www.uniprot.org/uniprot/?query=Zika+virus+&amp;sort=score">Uniprot</a> - unreviewed protein data</p>
            <p><a href="http://nextstrain.org/zika/">nextstrain</a> - virus phylogeny</p>
            <h3><a id="user-content-experimental-data" class="anchor" href="#experimental-data" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Experimental data</h3>
            <p><a href="https://dholk.primate.wisc.edu/project/dho/public/Zika/public/ZIKV-001-public/begin.view">University of Wisconsin-Madison</a> - viral shedding in rhesus macaques</p>
            <p><a href="https://zika.labkey.com/announcements/OConnor/thread.view?rowId=101">University of Wisconsin-Madison</a> - Serum antibody epitope mapping</p>
            <h3><a id="user-content-compiled-by-researchers" class="anchor" href="#compiled-by-researchers" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compiled by researchers</h3>
            <p><a href="http://science.sciencemag.org/content/early/2016/07/13/science.aag0219.figures-only#fig-data-additional-files">Countering Zika in Latin America</a> - epidemiological data (DOI: 10.1126/science.aag0219)</p>
            <p><a href="http://science.sciencemag.org/content/early/2016/03/23/science.aaf5036.figures-only#fig-data-additional-files">Zika virus in the Americas: Early epidemiological and genetic findings</a> - epidemiological data (DOI: 10.1126/science.aaf5036)</p>
            <h3><a id="user-content-aggregate-news-and-data" class="anchor" href="#aggregate-news-and-data" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Aggregate news and data</h3>
            <p><a href="http://dujour.obc.io/#/?title=Zika%20Information&amp;class-uri=http:%2F%2Fwww.pitt.edu%2Fobc%2FIDE_0000000014&amp;recent-threshold=30">Models of Infectious Disease Agent Study</a> - various Zika-related reports</p>
            <p><a href="https://github.com/BuzzFeedNews/zika-data">BuzzFeed</a> - machine-readable data</p>
            <p><a href="https://flutrackers.com/forum/forum/emerging-diseases-other-health-threats-alphabetical-i-thru-z/zika-virus">Flutrackers</a> - news and commentary</p>
            <p><a href="http://www.healthmap.org/zika">HealthMap</a> - news and official reports</p>
            <p><a href="https://www.nytimes.com/interactive/2016/health/what-is-zika-virus.html?_r=0">New York Times</a> - Interactive: What is Zika Virus?</p>

        </div>
    </section>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

</body>

</html>
